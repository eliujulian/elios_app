{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>eliOS App elevate</title>
    <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'css/eliosapp.css' %}" rel="stylesheet">
    <!-- // using local source to improve code completion
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <script src="https://kit.fontawesome.com/60a7f83830.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/eliosapp.js' %}"></script>
</head>
<body>

<!--
<div class="container-fluid">
    <div class="btn-group" role="group">
        <a href="{% url 'landingpage' %}"><button type="button" class="btn btn-primary">Home</button></a>
    </div>
</div>
-->

<div class="container">

    {% block content %}
        <div class="card m-1">
        {{ data }}
        <hr>
        <h3>Habit Checklist</h3>

        {% if user.habitprofile.yesterday_open_items %}
            offene Checkliste von gestern vorhanden - bitte bearbeiten.
        {% else %}

        {% for habit in user.habitprofile.get_habits_today %}
            <div class="card m-1" id="{{ habit.id_slug }}">
                <div class="row g-0">
                    <div class="col-6 col-xl-3 color-{{ habit.sphere }}">
                        <a style="color: black; text-decoration: None" class="p-1" href="{% url 'habit-detail' habit.id_slug %}">
                            {{ habit.title }}
                        </a>

                        {% if habit.link %}<a href="{{ habit.link }}">
                            <i class="fas fa-link float-end" style="margin: 5px"></i>
                        </a>{% endif %}
                    </div>

                    <div class="col-4 col-xl-2">
                        <button
                                class="btn btn-sm {% if not habit.open_today and habit.last_day_action == 1 %} btn-success {% else %} btn-outline-primary {% endif %}"
                                onclick="post_call(
                                    '{% url 'habit-event' habit.id_slug %}',
                                        {action: 'done', date: '{% now "Y-m-d" %}'},
                                        update_habit
                                        )"
                                {% if not habit.open_today %} disabled {% endif %}
                        >
                            done
                        </button>
                        <button
                                class="btn btn-sm {% if not habit.open_today and habit.last_day_action == 2 %} btn-danger {% else %} btn-outline-primary {% endif %}"
                            {% if not habit.open_today %} disabled {% endif %}
                            onclick="post_call(
                                '{% url 'habit-event' habit.id_slug %}',
                                {action: 'fail', date: '{% now "Y-m-d" %}'},
                                update_habit
                            )"
                        >
                           fail
                        </button>
                        <button
                                class="btn btn-sm {% if not habit.open_today and habit.last_day_action == 3 %} btn-secondary {% else %} btn-outline-primary {% endif %}"
                            {% if not habit.open_today %} disabled {% endif %}
                            onclick="post_call(
                                '{% url 'habit-event' habit.id_slug %}',
                                {action: 'cancel', date: '{% now "Y-m-d" %}'},
                                update_habit
                            )"
                        >
                           skip
                        </button>
                    </div>

                    <div class="col-2 col-xl-2" id="{{ habit.id_slug }}-current_streak">
                        {% if habit.total_counter == 0 %}
                            NEU
                        {% else %}
                            Reihe: {{ habit.current_streak }}
                        {% endif %}
                    </div>


                </div>
            </div>
        {% endfor %}

        {% endif %}

        {% if user.habitprofile.yesterday_open_items %}

            <h3>Habit Checklist - Open from Yesterday</h3>

        {% for habit in user.habitprofile.get_habits_yesterday %}
            <div class="card m-1" id="{{ habit.id_slug }}">
                <div class="row g-0">
                    <div class="col-md-3 color-{{ habit.sphere }}">
                        <a href="{% url 'habit-detail' habit.id_slug %}">
                            {{ habit.title }}
                        </a>
                    </div>
                    <div class="col-md-1">
                        Reihe: {{ habit.current_streak }}
                    </div>

                    <div class="col-md-2">
                        <button
                                class="btn btn-outline-primary btn-sm"
                                onclick="post_call(
                                    '{% url 'habit-event' habit.id_slug %}',
                                        {action: 'done', date: '{{ yesterday|date:"Y-m-d" }}'},
                                        update_habit
                                        )"
                        >
                            done
                        </button>
                        <button
                            class="btn btn-sm btn-outline-primary"
                            onclick="post_call(
                                '{% url 'habit-event' habit.id_slug %}',
                                {action: 'fail', date: '{{ yesterday|date:"Y-m-d" }}'},
                                update_habit
                            )"
                        >
                           fail
                        </button>
                        <button
                            class="btn btn-sm btn-outline-primary"
                            onclick="post_call(
                                '{% url 'habit-event' habit.id_slug %}',
                                {action: 'cancel', date: '{{ yesterday|date:"Y-m-d" }}'},
                                update_habit
                            )"
                        >
                           skip
                        </button>
                    </div>

                    <div class="col-md-3">
                        {% if habit.link %}<a href="{{ habit.link }}">link</a>{% endif %}
                    </div>

                </div>
            </div>
        {% endfor %}

        {% endif %}

            <hr>
            <div class="row">
            <div class="col-2">
                <strong>Allgemein</strong><br>
                <hr>
                <a href="{% url 'landingpage' %}">Home</a><br>
                <a href="{% url 'account-detail' %}">Account</a><br>
            </div>
            {% if perms.health.health_app %}
                <div class="col-2">
                    <strong>Gesundheit</strong><br>
                    <hr>
                    <a href="{% url 'weight' %}">Gewicht</a><br>
                    <hr>
                    <a href="{% url 'weight-create' %}">Gewicht erfassen</a>
                </div>
            {% endif %}

            {% if perms.personality.personality_app %}
                <div class="col-2">
                    <strong>Selbsterkenntnis</strong><br>
                    <hr>
                    <a href="{% url 'personality' %}">Persönlichkeitsprofil</a>
                </div>
            {% endif %}

            {% if perms.habit.habit_app %}
                <div class="col-2">
                    <strong>Gewohnheiten</strong><br>
                    <hr>
                    <a href="{% url 'habitprofile' %}">Visionen</a><br>
                    <a href="{% url 'goals' %}">Ziele</a><br>
                    <a href="{% url 'habits' %}">Gewohnheiten</a><br>
                    <hr>
                    <a href="{% url 'sphere' 1 %}">Arbeit</a><br>
                    <a href="{% url 'sphere' 2 %}">Finanzen</a><br>
                    <a href="{% url 'sphere' 3 %}">Gesundheit</a><br>
                    <a href="{% url 'sphere' 4 %}">Freizeit</a><br>
                    <a href="{% url 'sphere' 5 %}">Beziehung</a><br>
                    <a href="{% url 'sphere' 6 %}">Familie</a><br>
                    <a href="{% url 'sphere' 7 %}">Geselligkeit</a><br>
                    <a href="{% url 'sphere' 8 %}">Persönlichkeit</a><br>
                    <hr>
                </div>
            {% endif %}

            {% if perms.knowledge.knowledge_app %}
                <div class="col-2">
                    <strong>Wissen</strong><br>
                    <hr>
                    <a href="{% url 'books' %}">Bücher</a><br>
                    <hr>
                    <a href="{% url 'book-random' %}">Zufälliges Buch</a><br>
                    <a href="{% url 'chapter-random' %}">Zufälliges Kapitel</a>
                    <hr>
                </div>
            {% endif %}

        </div>

        </div>
    {% endblock content %}


{% csrf_token %}
</div>

</body>
</html>